/*
 * timer_pwm.c
 *
 * Created: 5/7/2022 10:37:51 PM
 *  Author: kioria
 */ 
#define F_CPU 16000000UL
#include <avr/io.h>
void pwm_init_tmr1(void){
	DDRB=(1<<PB1)|(1<<PB2);//SET OC1A OC1B AS OUTPUT
	TCCR1A=((1<<WGM11)|(1<<COM1A1));//SET A FAST PWM,TOP IN ICR1,NON-INVERTING MODEclear output on compare match
	/*TCCR1B=(1<<WGM12)|(1<<WGM13)|(1<<CS11)|(1<<CS10);//TOP IN ICR1,CLK/64*/
	TCCR1B=((1<<WGM12)|(1<<WGM13)|(1<<CS10)|(1<<CS11));//TOP IN ICR1,CLK/64
	//CALCULATING FPWM---PWM REQUENCY fOCnxPFCPWM
	//FPWM=F(OSC)/(N*(1+TOP)).WHERE N PRESCALER DIVIDER=16000000/(64*(1+)
	//TOP=39999..PS1--319999 PS64-4999 PS256-1249
	/*TCNT1=4499;*/
	TCNT1=0;
	
	ICR1=4999;//setting the top count
	//TIMER 1 CLKFRE=16000000/64=250000 THEREORE 0.000004 I CYCLE
	//MIN ON TIME 0.001/0.000004=250

}